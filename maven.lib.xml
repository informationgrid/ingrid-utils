<project xmlns:j="jelly:core" xmlns:m="jelly:maven" xmlns:a="jelly:ant" xmlns:deploy="deploy">
         
    <property environment="env" />
    <goal name="checkuser">
    	<echo message="*****************check user********************"/>
        <j:if test="${context.getVariable('env.USER') != null}">
                    <j:if test="${context.getVariable('env.USER') == 'root'}">
                        <fail>!!!PLEASE, do not run this script as root!!!</fail>
                    </j:if>
        </j:if>
    </goal>
	
	<!-- clean single files -->	
	<postGoal name="clean">
		<delete>
			<fileset dir="${basedir}">
	    	    <include name="**/jcoverage.ser"/>
			</fileset>
	   </delete>
	</postGoal>	
	

	<preGoal name="site" >
		<attainGoal name="checkuser"/>
	</preGoal>
	
	
	<preGoal name="maven-jcoverage-plugin:report">
		<j:set var="maven.test.failure.ignore" value="true"/>
	</preGoal>
	
	<postGoal name="maven-jcoverage-plugin:report">
		<j:set var="maven.test.failure.ignore" value="false"/>
	</postGoal>
</project>